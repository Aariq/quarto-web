# Regenerates the download json
name: Update Downloads
on:
  workflow_dispatch:
  schedule:
    - cron:  "*/15 * * * *"
jobs:
  update-downloads:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repo
        uses: actions/checkout@v2
      - name: Regenerate Download Json
        uses: ./.github/workflows/actions/release-info
        with:
          owner: 'quarto-dev'
          repo: 'quarto-cli'
          out-path: 'docs/download/_download.json'
          redirects-path: '_site/_redirects'
          redirects-template: /download/latest/$$prefix$$-$$suffix$$.$$extension$$
          github-token: ${{ github.token }}
      - name: Copy Download Json to Site
        run: |
          cp docs/download/_download.json _site/docs/download/_download.json
      - name: Commit Changes
        uses: stefanzweifel/git-auto-commit-action@v4
        with:
  
          # Optional. Local file path to the repository.
          # Defaults to the root of the repository.
          repository: .

          # Optional commit user and author settings
          commit_user_name: Github Action Runner
          commit_user_email: runner@quarto.org

          # Optional. Skip internal call to `git checkout`
          skip_checkout: true
a




